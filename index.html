<!DOCTYPE html>
<html>
<head>
	<title>Scrolling Field of Stars</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
	canvas {
		height: 100%;
		width: 100%;
		border: 5px solid silver;
		background: black; 
	}
	
	
	</style>
</head>
<body>

<canvas></canvas>

</body>

<script>

	var canvas = document.querySelector("canvas");
	var context = canvas.getContext("2d");
	window.addEventListener('resize', update, false); 
	
	//Field of stars? Fill the background with a random arrangement of white pixels that scrolls. 
	//Do it row by row.   
	var width =  canvas.width;
	var height = canvas.height;
	var field_of_stars = [];
	var rand;  
	//var row = context.createImageData(width, 1); 
	for (var j = 0; j < height + 1; j++){ //make an array of image objects that are random arrangements of stars. 
		field_of_stars[j] = context.createImageData(width, 1);
		for (var i=0; i < field_of_stars[j].data.length; i+=4){
			rand = Math.random() * 100;
			if (rand > 95){
				field_of_stars[j].data[i+0] = 255;
				field_of_stars[j].data[i+1] = 255;
				field_of_stars[j].data[i+2] = 255;
				field_of_stars[j].data[i+3] = 255;
			}
			else{
				field_of_stars[j].data[i+0] = 0;
				field_of_stars[j].data[i+1] = 0;
				field_of_stars[j].data[i+2] = 0;
				field_of_stars[j].data[i+3] = 255;
			}
		} 
	}
	
	update();
	
	function update(){ 
		canvas.width = window.innerWidth;
		canvas.height = window.innerHeight; 
		popper = field_of_stars.pop(); //moving one row of stars from the end to the beginning
									   // of the array every frame causes scrolling?
		field_of_stars.unshift(popper); 	 
		for (var i=0; i<height; i++){
			context.putImageData(field_of_stars[i], 0, i);
		}
		requestAnimationFrame(update);
	}
	 

	
</script>

</html>
